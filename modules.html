<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Select a Module</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="css/style.css" rel="stylesheet" />
  <style>
    /* Minimal, plays nice with your existing CSS */
    .grid { display:grid; grid-template-columns: repeat(2, minmax(200px, 1fr)); gap:1rem; }
    .tile {
      display:flex; align-items:center; justify-content:center; text-align:center;
      padding:2rem; border:2px solid #ddd; border-radius:16px; cursor:pointer;
      transition: transform .08s ease, box-shadow .08s ease;
      user-select:none; min-height:140px; background:#fff;
    }
    .tile:hover, .tile:focus { transform: translateY(-1px); box-shadow:0 6px 16px rgba(0,0,0,.08) }
    .tile h3 { margin:0 .5rem 0 0; font-size:1.1rem }
    .tile small { display:block; opacity:.8; margin-top:.25rem }
  </style>
</head>
<body>
  <main class="container" role="main">
    <h1>Choose a Module</h1>
    <p class="sub">Start with any module. You can come back to pick another when youâ€™re done.</p>

    <section class="grid" id="moduleGrid">
      <button class="tile" data-module="M1" aria-label="Foundational Skills">
        <div>
          <h3>ðŸ§± M1</h3>
          <small>Foundational Skills</small>
        </div>
      </button>

      <button class="tile" data-module="M2" aria-label="Equations and Inequalities">
        <div>
          <h3>ðŸŸ° M2</h3>
          <small>Equations &amp; Inequalities</small>
        </div>
      </button>

      <button class="tile" data-module="M3" aria-label="Functions">
        <div>
          <h3>ðŸ“ˆ M3</h3>
          <small>Functions</small>
        </div>
      </button>

      <button class="tile" data-module="M4" aria-label="Polynomials">
        <div>
          <h3>ðŸ”¢ M4</h3>
          <small>Polynomials</small>
        </div>
      </button>
    </section>
  </main>

  <script type="module">
    // Optional: use your shared helpers if present
    let setKV = () => {};
    try {
      const mod = await import('./js/app.js');
      if (typeof mod.setKV === 'function') setKV = mod.setKV;
      if (typeof mod.setProgress === 'function') mod.setProgress(20); // example
    } catch {}

    // Handle clicks â†’ store selection and go to shared rank page
    document.getElementById('moduleGrid').addEventListener('click', (e) => {
      const tile = e.target.closest('[data-module]');
      if (!tile) return;
      const moduleId = tile.dataset.module; // "M1" | "M2" | "M3" | "M4"
      try { setKV('current_module', moduleId); } catch {}
      // Also pass via query string so the rank page can work even if storage is blocked
      window.location.assign(`rank.html?module=${encodeURIComponent(moduleId)}`);
    });
  </script>
</body>
</html>
